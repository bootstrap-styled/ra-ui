(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1478:function(e,t,a){},1479:function(e,t,a){"use strict";a.r(t);a(808);var r=a(0),n=a.n(r),c=a(37),l=a.n(c),o=a(735),s=a.n(o),i=a(139),u=a.n(i),m=a(739),d=a(70),E=a(71),p=a(75),f=a(72),b=a(76),h=a(1498),v=a(639),g=(a(887),a(115)),y=function(e,t){if(e===g.d){var a=t.username;return localStorage.setItem("username",a),Promise.resolve()}return e===g.e?(localStorage.removeItem("username"),Promise.resolve()):e===g.b?Promise.resolve():e===g.a?localStorage.getItem("username")?Promise.resolve():Promise.reject():Promise.reject("Unkown method")},O=a(16),j=a(114),w=a(33),_="REVIEW_APPROVE_FAILURE",x=function(e,t,a){return{type:"REVIEW_APPROVE",payload:{id:e,data:Object(j.a)({},t,{status:"accepted"}),basePath:a},meta:{resource:"reviews",fetch:w.h,onSuccess:{notification:{body:"resources.reviews.notification.approved_success",level:"info"},redirectTo:"/reviews",basePath:a},onFailure:{notification:{body:"resources.reviews.notification.approved_error",level:"warning"}}}}},k="REVIEW_REJECT_FAILURE",C=function(e,t,a){return{type:"REVIEW_REJECT",payload:{id:e,data:Object(j.a)({},t,{status:"rejected"}),basePath:a},meta:{resource:"reviews",fetch:w.h,onSuccess:{notification:{body:"resources.reviews.notification.rejected_success",level:"info"},redirectTo:"/reviews",basePath:a},onFailure:{notification:{body:"resources.reviews.notification.rejected_error",level:"warning"}}}}},I=u.a.mark(P);function P(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.a)([Object(O.j)(_,u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.error,console.error(a),e.next=4,Object(O.a)([]);case 4:case"end":return e.stop()}},e)})),Object(O.j)(k,u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.error,console.error(a),e.next=4,Object(O.a)([]);case 4:case"end":return e.stop()}},e)}))]);case 2:case"end":return e.stop()}},I)}var F=[P],S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light",t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;return"CHANGE_THEME"===a?r:e},T=a(138),D=a(77),R=a(520),N=a(733),L=a(14),A=a(10),B=a.n(A),U=a(104),M=a.n(U),z=a(47),W=a.n(z),q=a(60),V=a.n(q),H=a(240),G=a.n(H),J=a(133),Q=a.n(J),$=a(113),K=a.n($),X=a(11),Y=a(375),Z=a.n(Y),ee=a(381),te=a(54),ae=a(67),re={palette:{type:"dark"}},ne={palette:{secondary:{light:"#5f5fc4",main:"#283593",dark:"#001064",contrastText:"#fff"}}},ce=function(e){var t=e.meta,a=(t=void 0===t?{}:t).touched,r=t.error,c=Object(D.a)({},e.input),l=Object(T.a)(e,["meta","input"]);return n.a.createElement(K.a,Object.assign({error:!(!a||!r),helperText:a&&r},c,l,{fullWidth:!0}))},le=function(e){function t(){var e,a;Object(d.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(n)))).login=function(e){return a.props.userLogin(e,a.props.location.state?a.props.location.state.nextPathname:"/")},a}return Object(b.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props,t=e.handleSubmit,a=e.isLoading,r=e.translate;return n.a.createElement("div",null,n.a.createElement(V.a,null,n.a.createElement("div",null,n.a.createElement(M.a,null,n.a.createElement(Z.a,null))),n.a.createElement("form",{onSubmit:t(this.login)},n.a.createElement("div",null,"Hint: demo / demo"),n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement(R.a,{autoFocus:!0,name:"username",component:ce,label:r("ra.auth.username"),disabled:a})),n.a.createElement("div",null,n.a.createElement(R.a,{name:"password",component:ce,label:r("ra.auth.password"),type:"password",disabled:a}))),n.a.createElement(G.a,null,n.a.createElement(W.a,{variant:"raised",type:"submit",color:"primary",disabled:a,fullWidth:!0},a&&n.a.createElement(Q.a,{size:25,thickness:2}),r("ra.auth.sign_in"))))),n.a.createElement(ee.a,null))}}]),t}(r.Component),oe=B()(te.a,Object(N.a)({form:"signIn",validate:function(e,t){var a={},r=t.translate;return e.username||(a.username=r("ra.validation.required")),e.password||(a.password=r("ra.validation.required")),a}}),Object(L.connect)(function(e){return{isLoading:e.admin.loading>0}},{userLogin:ae.i}))(le),se=function(e){return n.a.createElement(X.MuiThemeProvider,{theme:Object(X.createMuiTheme)(ne)},n.a.createElement(oe,e))},ie=a(754),ue=a(1502),me=a(745),de=a(383),Ee=a(804),pe=a(387),fe=a.n(pe),be=Object(te.a)(function(e){var t=e.translate,a=Object(T.a)(e,["translate"]);return n.a.createElement(me.a,a,n.a.createElement(de.a,{to:"/configuration",primaryText:t("pos.configuration"),leftIcon:n.a.createElement(fe.a,null)}))}),he=function(e){return n.a.createElement(Ee.a,Object.assign({},e,{userMenu:n.a.createElement(be,null)}))},ve=function(e){return n.a.createElement(ie.a,Object.assign({size:200},e))},ge=Object(L.connect)(function(e){return{theme:"dark"===e.theme?re:ne}},{})(function(e){return n.a.createElement(ue.a,Object.assign({appBar:he,sidebar:ve},e))}),ye=a(796),Oe=a.n(ye),je=a(756),we=a(136),_e=a(26),xe=a(9),ke=a(1496),Ce=a(764),Ie=a.n(Ce),Pe=a(1484),Fe=function(e){return e.basket.length},Se=function(e){return n.a.createElement(Pe.a,Object.assign({},e,{render:Fe}))};Se.defaultProps={label:"Nb Items",textAlign:"right"};var Te=Se,De=function(e){return n.a.createElement(xe.ReferenceField,Object.assign({label:"Product",source:"product_id",reference:"products"},e),n.a.createElement(xe.TextField,{source:"reference"}))};De.defaultProps={source:"product_id",addLabel:!0};var Re=De,Ne=a(762),Le=a.n(Ne),Ae={opacity:.87,width:20,height:20},Be=function(e){var t=e.record;return n.a.createElement("span",null,Array(t.rating).fill(!0).map(function(e,t){return n.a.createElement(Le.a,{key:t,style:Ae})}))};Be.defaultProps={label:"resources.reviews.fields.rating",source:"rating",addLabel:!0};var Ue=Be,Me=function(e){var t=e.record,a=e.size;return n.a.createElement(M.a,{src:"".concat(t.avatar,"?size=").concat(a,"x").concat(a),size:a,style:{width:a,height:a}})};Me.defaultProps={size:25};var ze=Me,We=a(48),qe=a.n(We)()(function(e){var t=e.record,a=void 0===t?{}:t,r=e.size;return n.a.createElement("div",{style:{display:"flex",flexWrap:"nowrap",alignItems:"center"}},n.a.createElement(ze,{record:a,size:r}),"\xa0",a.first_name," ",a.last_name)});qe.defaultProps={source:"last_name",label:"resources.customers.fields.name"};var Ve=qe,He=a(367),Ge=a.n(He),Je=[{id:"compulsive",name:"resources.segments.data.compulsive"},{id:"collector",name:"resources.segments.data.collector"},{id:"ordered_once",name:"resources.segments.data.ordered_once"},{id:"regular",name:"resources.segments.data.regular"},{id:"returns",name:"resources.segments.data.returns"},{id:"reviewer",name:"resources.segments.data.reviewer"}],Qe=Object(te.a)(function(e){var t=e.record,a=e.translate;return n.a.createElement("span",{className:"d-flex flex-wrap"},t.groups&&t.groups.map(function(e){return n.a.createElement(Ge.a,{key:e,className:"m-1 p-1"},a(Je.find(function(t){return t.id===e}).name))}))});Qe.defaultProps={addLabel:!0,source:"groups"};var $e=Qe,Ke=B()(te.a)(function(e){var t=e.translate,a=Object(T.a)(e,["translate"]);return n.a.createElement(xe.SelectInput,Object.assign({},a,{choices:Je.map(function(e){return{id:e.id,name:t(e.name)}})}))});Ke.defaultProps={source:"groups"};var Xe=Ke,Ye=Object(te.a)(function(e){var t=e.translate,a=(e.addField,Object(T.a)(e,["translate","addField"]));return n.a.createElement(xe.SelectArrayInput,Object.assign({},a,{choices:Je.map(function(e){return{id:e.id,name:t(e.name)}})}))});Ye.defaultProps={addField:!0,source:"groups"};var Ze=Ye,et=a(763),tt=function(e){return n.a.createElement(et.a,{to:"/customers/".concat(e.record.id)},n.a.createElement(Ve,e))};tt.defaultProps={source:"customer_id",addLabel:!0};var at=tt,rt=a(86),nt=a.n(rt),ct=a(177),lt=a.n(ct),ot=Object(te.a)(function(e){var t=e.ids,a=e.data,r=e.basePath,c=e.translate;return n.a.createElement("div",{style:{margin:"1em"}},t.map(function(e){return n.a.createElement(V.a,{key:e},n.a.createElement(lt.a,{title:n.a.createElement("div",null,n.a.createElement("h2",null,"".concat(a[e].first_name," ").concat(a[e].last_name)),n.a.createElement(xe.EditButton,{resource:"visitors",basePath:r,record:a[e]})),avatar:n.a.createElement(ze,{record:a[e],size:"45"})}),n.a.createElement(nt.a,null,n.a.createElement("div",null,c("resources.customers.fields.last_seen_gte"),"\xa0",n.a.createElement(xe.DateField,{record:a[e],source:"last_seen",type:"date"})),n.a.createElement("div",null,c("resources.commands.name",parseInt(a[e].nb_commands,10)||1),"\xa0:\xa0",n.a.createElement(xe.NumberField,{record:a[e],source:"nb_commands",label:"resources.customers.fields.commands"})),n.a.createElement("div",null,c("resources.customers.fields.total_spent"),"\xa0 :"," ",n.a.createElement(mt,{record:a[e],source:"total_spent",options:{style:"currency",currency:"USD"}}))),a[e].groups&&a[e].groups.length>0&&n.a.createElement(nt.a,null,n.a.createElement($e,{record:a[e]})))}))});ot.defaultProps={data:{},ids:[]};var st=ot,it=Ie.a,ut=function(e){return n.a.createElement(xe.Filter,e,n.a.createElement(xe.SearchInput,{source:"q",alwaysOn:!0}),n.a.createElement(xe.DateInput,{source:"last_seen_gte"}),n.a.createElement(xe.NullableBooleanInput,{source:"has_ordered"}),n.a.createElement(xe.NullableBooleanInput,{source:"has_newsletter",defaultValue:!0}),n.a.createElement(Xe,null))},mt=function(e){var t=function(t){return t.record[t.source]>500?n.a.createElement("span",{style:{color:"red"}},n.a.createElement(e,t)):n.a.createElement(e,t)};return t.displayName="Colored(".concat(e.displayName,")"),t}(xe.NumberField);mt.defaultProps=xe.NumberField.defaultProps;var dt=function(e){var t=Object(D.a)({},e);return n.a.createElement(ke.a,Object.assign({},t,{filters:n.a.createElement(ut,null),sort:{field:"last_seen",order:"DESC"},perPage:25}),n.a.createElement(xe.Responsive,{xsmall:n.a.createElement(st,null),medium:n.a.createElement(xe.Datagrid,null,n.a.createElement(at,null),n.a.createElement(xe.DateField,{source:"last_seen",type:"date"}),n.a.createElement(xe.NumberField,{source:"nb_commands",label:"resources.customers.fields.commands"}),n.a.createElement(mt,{source:"total_spent",options:{style:"currency",currency:"USD"}}),n.a.createElement(xe.DateField,{source:"latest_purchase",showTime:!0}),n.a.createElement(xe.BooleanField,{source:"has_newsletter",label:"News."}),n.a.createElement($e,null),n.a.createElement(xe.EditButton,null))}))},Et=function(e){var t=e.record;return t?n.a.createElement(Ve,{record:t,size:32}):null},pt=function(e){var t=Object(D.a)({},e);return n.a.createElement(xe.Edit,Object.assign({title:n.a.createElement(Et,null)},t),n.a.createElement(xe.TabbedForm,null,n.a.createElement(xe.FormTab,{label:"resources.customers.tabs.identity"},n.a.createElement(xe.TextInput,{source:"first_name",className:"d-inline-block"}),n.a.createElement(xe.TextInput,{source:"last_name",className:"d-inline-block"}),n.a.createElement(xe.TextInput,{type:"email",source:"email",validation:{email:!0}}),n.a.createElement(xe.DateInput,{source:"birthday"})),n.a.createElement(xe.FormTab,{label:"resources.customers.tabs.address",path:"address"},n.a.createElement(xe.LongTextInput,{source:"address"}),n.a.createElement(xe.TextInput,{source:"zipcode",className:"d-inline-block"}),n.a.createElement(xe.TextInput,{source:"city",className:"d-inline-block"})),n.a.createElement(xe.FormTab,{label:"resources.customers.tabs.orders",path:"orders"},n.a.createElement(xe.ReferenceManyField,{addLabel:!1,sort:{field:"date",order:"DESC"},reference:"commands",target:"customer_id"},n.a.createElement(xe.Datagrid,null,n.a.createElement(xe.DateField,{source:"date"}),n.a.createElement(xe.TextField,{source:"reference"}),n.a.createElement(Te,null),n.a.createElement(xe.NumberField,{source:"total",options:{style:"currency",currency:"USD"}}),n.a.createElement(xe.TextField,{source:"status"}),n.a.createElement(xe.EditButton,null)))),n.a.createElement(xe.FormTab,{label:"resources.customers.tabs.reviews",path:"reviews"},n.a.createElement(xe.ReferenceManyField,{addLabel:!1,sort:{field:"date",order:"DESC"},reference:"reviews",target:"customer_id"},n.a.createElement(xe.Datagrid,{filter:{status:"approved"}},n.a.createElement(xe.DateField,{source:"date"}),n.a.createElement(Re,null),n.a.createElement(Ue,null),n.a.createElement(xe.TextField,{source:"comment"}),n.a.createElement(xe.EditButton,{style:{padding:0}})))),n.a.createElement(xe.FormTab,{label:"resources.customers.tabs.stats",path:"stats"},n.a.createElement(Ze,null),n.a.createElement(xe.NullableBooleanInput,{source:"has_newsletter"}),n.a.createElement(xe.DateField,{source:"first_seen",style:{width:128,display:"inline-block"}}),n.a.createElement(xe.DateField,{source:"latest_purchase",style:{width:128,display:"inline-block"}}),n.a.createElement(xe.DateField,{source:"last_seen",style:{width:128,display:"inline-block"}}))))},ft=function(e){var t=Object(D.a)({},e);return n.a.createElement(xe.Create,t,n.a.createElement(xe.TabbedForm,null,n.a.createElement(xe.FormTab,{label:"resources.customers.tabs.identity"},n.a.createElement(xe.TextInput,{autoFocus:!0,source:"first_name",className:"d-inline-block"}),n.a.createElement(xe.TextInput,{source:"last_name",className:"d-inline-block"}),n.a.createElement(xe.TextInput,{type:"email",source:"email",validation:{email:!0},fullWidth:!0}),n.a.createElement(xe.DateInput,{source:"birthday"})),n.a.createElement(xe.FormTab,{label:"resources.customers.tabs.address",path:"address"},n.a.createElement(xe.LongTextInput,{source:"address"}),n.a.createElement(xe.TextInput,{source:"zipcode",className:"d-inline-block"}),n.a.createElement(xe.TextInput,{source:"city",className:"d-inline-block"}))))},bt=a(371),ht=a(235),vt=a.n(ht),gt=a(248),yt=a.n(gt),Ot=a(778),jt=a.n(Ot),wt=a(779),_t=a.n(wt),xt=a(1485),kt=function(e){return n.a.createElement(xt.a,Object.assign({source:"customer_id",reference:"customers"},e),n.a.createElement(Ve,null))};kt.defaultProps={source:"customer_id",addLabel:!0};var Ct=kt,It=a(1486),Pt=a(1487),Ft=a(1488),St=a(1489),Tt=a(1490),Dt=Object(te.a)(function(e){var t=e.ids,a=e.data,r=e.basePath,c=e.translate;return n.a.createElement("div",{style:{margin:"1em"}},t.map(function(e){return n.a.createElement(V.a,{key:e},n.a.createElement(lt.a,{title:n.a.createElement("div",null,n.a.createElement("span",null,c("resources.commands.name",1),":\xa0",n.a.createElement(It.a,{record:a[e],source:"reference"})),n.a.createElement(Pt.a,{resource:"commands",basePath:r,record:a[e]}))}),n.a.createElement(nt.a,null,n.a.createElement("span",null,c("resources.customers.name",1),":\xa0",n.a.createElement(Ct,{record:a[e],basePath:r})),n.a.createElement("span",null,c("resources.reviews.fields.date"),":\xa0",n.a.createElement(Ft.a,{record:a[e],source:"date",showTime:!0})),n.a.createElement("span",null,c("resources.commands.fields.basket.total"),":\xa0",n.a.createElement(St.a,{record:a[e],source:"total",options:{style:"currency",currency:"USD"}})),n.a.createElement("span",null,c("resources.commands.fields.status"),":\xa0",n.a.createElement(It.a,{source:"status",record:a[e]})),n.a.createElement("span",null,c("resources.commands.fields.returned"),":\xa0",n.a.createElement(Tt.a,{record:a[e],source:"returned"}))))}))});Dt.defaultProps={data:{},ids:[]};var Rt=Dt,Nt=(vt.a,function(e){var t=Object(D.a)({},e);return n.a.createElement(xe.Filter,t,n.a.createElement(xe.SearchInput,{source:"q",alwaysOn:!0}),n.a.createElement(xe.ReferenceInput,{source:"customer_id",reference:"customers"},n.a.createElement(xe.AutocompleteInput,{optionText:function(e){return"".concat(e.first_name," ").concat(e.last_name)}})),n.a.createElement(xe.DateInput,{source:"date_gte"}),n.a.createElement(xe.DateInput,{source:"date_lte"}),n.a.createElement(xe.TextInput,{source:"total_gte"}),n.a.createElement(xe.NullableBooleanInput,{source:"returned"}))}),Lt=function(e){function t(){var e,a;Object(d.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(n)))).tabs=[{id:"ordered",name:"ordered"},{id:"delivered",name:"delivered"},{id:"cancelled",name:"cancelled"}],a.state={ordered:[],delivered:[],cancelled:[]},a.handleChange=function(e,t){var r=a.props,n=r.filterValues;(0,r.setFilters)(Object(j.a)({},n,{status:t}))},a}return Object(b.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props,t=e.filterValues,a=Object(T.a)(e,["filterValues"]);return n.a.createElement(r.Fragment,null,n.a.createElement(jt.a,{fullWidth:!0,centered:!0,value:t.status,indicatorColor:"primary",onChange:this.handleChange},this.tabs.map(function(e){return n.a.createElement(_t.a,{key:e.id,label:e.name,value:e.id})})),n.a.createElement(yt.a,null),n.a.createElement(xe.Responsive,{xsmall:n.a.createElement(Rt,Object.assign({},a,{ids:this.state[t.status]})),medium:n.a.createElement("div",null,"ordered"===t.status&&n.a.createElement(xe.Datagrid,Object.assign({},a,{ids:this.state.ordered}),n.a.createElement(xe.DateField,{source:"date",showTime:!0}),n.a.createElement(xe.TextField,{source:"reference"}),n.a.createElement(Ct,null),n.a.createElement(Te,null),n.a.createElement(xe.NumberField,{source:"total",options:{style:"currency",currency:"USD"}}),n.a.createElement(xe.EditButton,null)),"delivered"===t.status&&n.a.createElement(xe.Datagrid,Object.assign({},a,{ids:this.state.delivered}),n.a.createElement(xe.DateField,{source:"date",showTime:!0}),n.a.createElement(xe.TextField,{source:"reference"}),n.a.createElement(Ct,null),n.a.createElement(Te,null),n.a.createElement(xe.NumberField,{source:"total",options:{style:"currency",currency:"USD"}}),n.a.createElement(xe.BooleanField,{source:"returned"}),n.a.createElement(xe.EditButton,null)),"cancelled"===t.status&&n.a.createElement(xe.Datagrid,Object.assign({},a,{ids:this.state.cancelled}),n.a.createElement(xe.DateField,{source:"date",showTime:!0}),n.a.createElement(xe.TextField,{source:"reference"}),n.a.createElement(Ct,null),n.a.createElement(Te,null),n.a.createElement(xe.NumberField,{source:"total",options:{style:"currency",currency:"USD"}}),n.a.createElement(xe.BooleanField,{source:"returned"}),n.a.createElement(xe.EditButton,null)))}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.ids!==t[e.filterValues.status]?Object(j.a)({},t,Object(bt.a)({},e.filterValues.status,e.ids)):null}}]),t}(n.a.Component),At=function(e){var t=Object(D.a)({},e);return n.a.createElement(ke.a,Object.assign({},t,{filterDefaultValues:{status:"ordered"},sort:{field:"date",order:"DESC"},perPage:25,filters:n.a.createElement(Nt,null)}),n.a.createElement(Lt,null))},Bt=a(646),Ut=a(229),Mt=a.n(Ut),zt=a(232),Wt=a.n(zt),qt=a(234),Vt=a.n(qt),Ht=a(64),Gt=a.n(Ht),Jt=a(126),Qt=a.n(Jt),$t=a(233),Kt=a.n($t),Xt=a(107),Yt=a.n(Xt),Zt=a(129),ea=a.n(Zt),ta=a(510),aa=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var e=this.props,t=e.record.basket;(0,e.crudGetMany)("products",t.map(function(e){return e.product_id}))}},{key:"render",value:function(){var e=this.props,t=e.record,a=e.products,r=e.translate,c=t.basket;return n.a.createElement(ea.a,null,n.a.createElement(Wt.a,null,n.a.createElement(Kt.a,null,n.a.createElement(Yt.a,null,n.a.createElement(Qt.a,null,r("resources.commands.fields.basket.reference")),n.a.createElement(Qt.a,null,r("resources.commands.fields.basket.unit_price")),n.a.createElement(Qt.a,null,r("resources.commands.fields.basket.quantity")),n.a.createElement(Qt.a,null,r("resources.commands.fields.basket.total")))),n.a.createElement(Vt.a,null,c.map(function(e){return a[e.product_id]&&n.a.createElement(Yt.a,{key:e.product_id},n.a.createElement(Gt.a,null,n.a.createElement(et.a,{to:"/products/".concat(e.product_id)},a[e.product_id].reference)),n.a.createElement(Gt.a,null,a[e.product_id].price.toLocaleString(void 0,{style:"currency",currency:"USD"})),n.a.createElement(Gt.a,null,e.quantity),n.a.createElement(Gt.a,null,(a[e.product_id].price*e.quantity).toLocaleString(void 0,{style:"currency",currency:"USD"})))}),n.a.createElement(Yt.a,null,n.a.createElement(Gt.a,{colSpan:2}),n.a.createElement(Gt.a,null,r("resources.commands.fields.basket.sum")),n.a.createElement(Gt.a,null,t.total_ex_taxes.toLocaleString(void 0,{style:"currency",currency:"USD"}))),n.a.createElement(Yt.a,null,n.a.createElement(Gt.a,{colSpan:2}),n.a.createElement(Gt.a,null,r("resources.commands.fields.basket.delivery")),n.a.createElement(Gt.a,null,t.delivery_fees.toLocaleString(void 0,{style:"currency",currency:"USD"}))),n.a.createElement(Yt.a,null,n.a.createElement(Gt.a,{colSpan:2}),n.a.createElement(Gt.a,null,r("resources.commands.fields.basket.tax_rate")),n.a.createElement(Gt.a,null,t.tax_rate.toLocaleString(void 0,{style:"percent"}))),n.a.createElement(Yt.a,null,n.a.createElement(Gt.a,{colSpan:2}),n.a.createElement(Gt.a,null,r("resources.commands.fields.basket.total")),n.a.createElement(Gt.a,null,t.total.toLocaleString(void 0,{style:"currency",currency:"USD"}))))))}}]),t}(r.Component),ra=B()(te.a,Object(L.connect)(function(e,t){return{products:t.record.basket.map(function(e){return e.product_id}).map(function(t){return e.admin.resources.products.data[t]}).filter(function(e){return"undefined"!==typeof e}).reduce(function(e,t){return e[t.id]=t,e},{})}},{crudGetMany:ta.e}))(aa),na=Object(te.a)(function(e){var t=e.record,a=e.translate;return n.a.createElement("span",null,a("resources.commands.name",{smart_count:1})," #",t.reference)}),ca=function(e){var t=Object(D.a)({},e);return n.a.createElement(Bt.a,Object.assign({title:n.a.createElement(na,null)},t),function(e){return e.record?n.a.createElement("div",null,n.a.createElement(Mt.a,null,n.a.createElement(xe.TitleForRecord,{defaultTitle:e.defaultTitle,record:e.record}),n.a.createElement(xe.SimpleForm,e,n.a.createElement(xe.DateInput,{source:"date"}),n.a.createElement(xe.ReferenceInput,{source:"customer_id",reference:"customers"},n.a.createElement(xe.AutocompleteInput,{optionText:function(e){return"".concat(e.first_name," ").concat(e.last_name)}})),n.a.createElement(xe.SelectInput,{source:"status",choices:[{id:"delivered",name:"delivered"},{id:"ordered",name:"ordered"},{id:"cancelled",name:"cancelled"},{id:"unknown",name:"unknown",disabled:!0}]}),n.a.createElement(xe.BooleanInput,{source:"returned"}))),n.a.createElement(ra,{record:e.record})):""})},la=a(518),oa=a.n(la),sa=a(783),ia=a.n(sa),ua=a(531),ma=a(780),da=a.n(ma),Ea=a(781),pa=a.n(Ea),fa=a(782),ba=a.n(fa),ha=a(135),va=a.n(ha),ga=a(61),ya=a.n(ga),Oa=a(399),ja=a.n(Oa),wa=a(204),_a=function(e){return"xs"===e?2:"sm"===e?3:"md"===e?4:"lg"===e?5:6},xa=B()(va()())(function(e){var t=e.ids,a=e.data,r=e.basePath,c=e.width;return n.a.createElement("div",null,n.a.createElement(da.a,{cellHeight:180,cols:_a(c)},t.map(function(e){return n.a.createElement(pa.a,{key:e},n.a.createElement("img",{src:a[e].thumbnail,alt:""}),n.a.createElement(ba.a,{title:a[e].reference,subtitle:n.a.createElement("span",null,a[e].width,"x",a[e].height,","," ",n.a.createElement(St.a,{source:"price",record:a[e],color:"inherit",options:{style:"currency",currency:"USD"}})),actionIcon:n.a.createElement(ya.a,{to:Object(wa.a)(r,a[e].id),component:_e.Link},n.a.createElement(ja.a,null))}))})))}),ka=function(e){var t=e.record;return n.a.createElement(V.a,null,n.a.createElement(nt.a,null,n.a.createElement("img",{src:t.image,alt:""})))},Ca=ia.a,Ia=Object(te.a)(function(e){var t=e.label,a=e.translate;return n.a.createElement(oa.a,{label:a(t)})}),Pa=function(e){return n.a.createElement(xe.Filter,e,n.a.createElement(xe.SearchInput,{source:"q",alwaysOn:!0}),n.a.createElement(xe.ReferenceInput,{source:"category_id",reference:"categories",sort:{field:"id",order:"ASC"}},n.a.createElement(xe.SelectInput,{source:"name"})),n.a.createElement(xe.NumberInput,{source:"width_gte"}),n.a.createElement(xe.NumberInput,{source:"width_lte"}),n.a.createElement(xe.NumberInput,{source:"height_gte"}),n.a.createElement(xe.NumberInput,{source:"height_lte"}),n.a.createElement(Ia,{label:"resources.products.fields.stock_lte",source:"stock_lte",defaultValue:10}))},Fa=function(e){return n.a.createElement(xe.List,Object.assign({},e,{filters:n.a.createElement(Pa,null),perPage:20,sort:{field:"id",order:"ASC"}}),n.a.createElement(xa,null))},Sa=function(e){var t=Object(D.a)({},e);return n.a.createElement(xe.Create,t,n.a.createElement(xe.TabbedForm,null,n.a.createElement(xe.FormTab,{label:"resources.products.tabs.image"},n.a.createElement(xe.TextInput,{autoFocus:!0,source:"image",options:{fullWidth:!0},validate:Object(xe.required)()}),n.a.createElement(xe.TextInput,{source:"thumbnail",options:{fullWidth:!0},validate:Object(xe.required)()})),n.a.createElement(xe.FormTab,{label:"resources.products.tabs.details",path:"details"},n.a.createElement(xe.TextInput,{source:"reference",validate:Object(xe.required)()}),n.a.createElement(xe.NumberInput,{source:"price",validate:Object(xe.required)()}),n.a.createElement(xe.NumberInput,{source:"width",validate:Object(xe.required)()}),n.a.createElement(xe.NumberInput,{source:"height",validate:Object(xe.required)()}),n.a.createElement(xe.ReferenceInput,{source:"category_id",reference:"categories",allowEmpty:!0},n.a.createElement(xe.SelectInput,{source:"name"})),n.a.createElement(xe.NumberInput,{source:"stock",validate:Object(xe.required)()})),n.a.createElement(xe.FormTab,{label:"resources.products.tabs.description",path:"description"},n.a.createElement(ua.a,{source:"description",addLabel:!1}))))},Ta=function(e){var t=e.record;return n.a.createElement("span",null,"Poster #",t.reference)},Da=function(e){var t=Object(D.a)({},e);return n.a.createElement(xe.Edit,Object.assign({},t,{title:n.a.createElement(Ta,null)}),n.a.createElement(xe.TabbedForm,null,n.a.createElement(xe.FormTab,{label:"resources.products.tabs.image"},n.a.createElement(ka,null),n.a.createElement(xe.TextInput,{source:"image",options:{fullWidth:!0}}),n.a.createElement(xe.TextInput,{source:"thumbnail",options:{fullWidth:!0}})),n.a.createElement(xe.FormTab,{label:"resources.products.tabs.details",path:"details"},n.a.createElement(xe.TextInput,{source:"reference"}),n.a.createElement(xe.NumberInput,{source:"price"}),n.a.createElement(xe.NumberInput,{source:"width"}),n.a.createElement(xe.NumberInput,{source:"height"}),n.a.createElement(xe.ReferenceInput,{source:"category_id",reference:"categories"},n.a.createElement(xe.SelectInput,{source:"name"})),n.a.createElement(xe.NumberInput,{source:"stock"})),n.a.createElement(xe.FormTab,{label:"resources.products.tabs.description",path:"description"},n.a.createElement(ua.a,{source:"description",addLabel:!1})),n.a.createElement(xe.FormTab,{label:"resources.products.tabs.reviews",path:"reviews"},n.a.createElement(xe.ReferenceManyField,{reference:"reviews",target:"product_id",addLabel:!1,pagination:n.a.createElement(xe.Pagination,null)},n.a.createElement(xe.Datagrid,null,n.a.createElement(xe.DateField,{source:"date"}),n.a.createElement(Ct,null),n.a.createElement(Ue,null),n.a.createElement(xe.TextField,{source:"comment"}),n.a.createElement(xe.TextField,{source:"status"}),n.a.createElement(xe.EditButton,null))))))},Ra=a(785),Na=a.n(Ra),La={width:25,maxWidth:25,maxHeight:25},Aa=function(e){var t=e.record;return n.a.createElement("img",{src:t.thumbnail,style:La,alt:""})},Ba=function(e){var t=e.record;return n.a.createElement(_e.Link,{to:"products/".concat(t.id)},t.reference)};Ba.defaultProps={source:"id",label:"Reference"};var Ua=Ba,Ma=a(124),za=B()(te.a)(function(e){var t=e.record,a=e.translate;return n.a.createElement(W.a,{size:"small",color:"primary",component:_e.Link,to:{pathname:"/products",search:Object(Ma.stringify)({page:1,perPage:25,sort:"id",order:"DESC",filter:JSON.stringify({category_id:t.id})})},className:"d-inline-flex align-items-center"},n.a.createElement(Ca,{className:"pr-1"}),a("resources.categories.fields.products"))}),Wa=Na.a,qa=function(e){var t=Object(D.a)({},e);return n.a.createElement(ke.a,Object.assign({},t,{sort:{field:"name",order:"ASC"}}),n.a.createElement(xe.Datagrid,null,n.a.createElement(xe.TextField,{source:"name"}),n.a.createElement(za,null),n.a.createElement(xe.EditButton,null)))},Va=Object(te.a)(function(e){var t=e.record,a=e.translate;return n.a.createElement("span",null,a("resources.categories.name",{smart_count:1}),' "',t.name,'"')}),Ha=function(e){return n.a.createElement(xe.Edit,Object.assign({title:n.a.createElement(Va,null)},e),n.a.createElement(xe.SimpleForm,null,n.a.createElement(xe.TextInput,{source:"name"}),n.a.createElement(xe.ReferenceManyField,{reference:"products",target:"category_id",label:"resources.categories.fields.products",perPage:5},n.a.createElement(xe.Datagrid,null,n.a.createElement(Aa,null),n.a.createElement(Ua,{source:"reference"}),n.a.createElement(xe.NumberField,{source:"price",options:{style:"currency",currency:"USD"}}),n.a.createElement(xe.NumberField,{source:"width",options:{minimumFractionDigits:2}}),n.a.createElement(xe.NumberField,{source:"height",options:{minimumFractionDigits:2}}),n.a.createElement(xe.NumberField,{source:"stock"}),n.a.createElement(xe.EditButton,null)))))},Ga=a(1500),Ja=a(1504),Qa=a(1491),$a=a(1503),Ka=a(1492),Xa=a(1493),Ya=a(1494),Za=a(792),er=a(1499),tr=a(1501),ar=a(1497),rr=a(1495),nr=a(403),cr=a.n(nr),lr=a(401),or=a.n(lr),sr=a(402),ir=a.n(sr),ur=function(e){function t(){var e,a;Object(d.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(n)))).handleApprove=function(){var e=a.props,t=e.reviewApprove,r=e.record;t(r.id,r)},a.handleReject=function(){var e=a.props,t=e.reviewReject,r=e.record;t(r.id,r)},a}return Object(b.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){return"pending"!==this.props.record.status?null:n.a.createElement("span",null,n.a.createElement(ya.a,{onClick:this.handleApprove},n.a.createElement(or.a,null)),n.a.createElement(ya.a,{onClick:this.handleReject},n.a.createElement(ir.a,null)))}}]),t}(r.Component),mr=Object(L.connect)(null,{reviewApprove:x,reviewReject:C})(ur),dr=a(247),Er=function(e){function t(){var e,a;Object(d.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(n)))).handleApprove=function(){var e=a.props,t=e.reviewApprove,r=e.record;t(r.id,r)},a}return Object(b.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props,t=e.record,a=e.translate;return t&&"pending"===t.status?n.a.createElement(W.a,{color:"primary",size:"small",onClick:this.handleApprove},n.a.createElement(or.a,{color:"primary",style:{paddingRight:"0.5em",color:"green"}}),a("resources.reviews.action.accept")):n.a.createElement("span",null)}}]),t}(r.Component),pr=B()(te.a,Object(L.connect)(null,{reviewApprove:x}))(Er),fr=function(e){function t(){var e,a;Object(d.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(n)))).handleApprove=function(){var e=a.props,t=e.reviewReject,r=e.record;t(r.id,r)},a}return Object(b.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props,t=e.record,a=e.translate;return t&&"pending"===t.status?n.a.createElement(W.a,{color:"primary",size:"small",onClick:this.handleApprove},n.a.createElement(ir.a,{color:"primary",style:{paddingRight:"0.5em",color:"red"}}),a("resources.reviews.action.reject")):n.a.createElement("span",null)}}]),t}(r.Component),br=B()(te.a,Object(L.connect)(null,{reviewReject:C}))(fr),hr=function(e){var t=e.data;return n.a.createElement(dr.a,null,n.a.createElement(pr,{record:t}),n.a.createElement(br,{record:t}))},vr=a(642),gr=a(79),yr=function(e){function t(){var e,a;Object(d.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(n)))).componentDidMount=function(){var e=a.props,t=e.basePath,r=e.startUndoable,n=e.resource,c=e.selectedIds;r(Object(vr.e)(n,c,{status:"accepted"},t)),a.props.onExit()},a}return Object(b.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){return null}}]),t}(r.Component),Or=Object(L.connect)(void 0,{startUndoable:gr.h})(yr),jr=function(e){function t(){var e,a;Object(d.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(n)))).componentDidMount=function(){var e=a.props,t=e.basePath,r=e.startUndoable,n=e.resource,c=e.selectedIds;r(Object(vr.e)(n,c,{status:"rejected"},t)),a.props.onExit()},a}return Object(b.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){return null}}]),t}(r.Component),wr=Object(L.connect)(void 0,{startUndoable:gr.h})(jr),_r=a(786),xr=a.n(_r),kr=a(787),Cr=a.n(kr),Ir=a(504),Pr=a.n(Ir),Fr=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return"accepted"===e.status?Object(j.a)({},a,{borderLeftColor:xr.a[500],borderLeftWidth:5,borderLeftStyle:"solid"}):"pending"===e.status?Object(j.a)({},a,{borderLeftColor:Cr.a[500],borderLeftWidth:5,borderLeftStyle:"solid"}):"rejected"===e.status?Object(j.a)({},a,{borderLeftColor:Pr.a[500],borderLeftWidth:5,borderLeftStyle:"solid"}):a},Sr={height:"100%",display:"flex",flexDirection:"column",margin:"0.5rem 0"},Tr=Object(te.a)(function(e){var t=e.ids,a=e.data,r=e.basePath,c=e.translate;return n.a.createElement("div",{style:{margin:"1em"}},t.map(function(e){return n.a.createElement(V.a,{key:e,style:Fr(a[e],Sr)},n.a.createElement(lt.a,{title:n.a.createElement("div",null,n.a.createElement("span",null,c("resources.reviews.fields.date"),":\xa0",n.a.createElement(Ft.a,{record:a[e],source:"date"})),n.a.createElement(Pt.a,{resource:"reviews",basePath:r,record:a[e]}))}),n.a.createElement(nt.a,null,n.a.createElement("span",null,c("resources.reviews.fields.rating",1),":\xa0",n.a.createElement(Ue,{record:a[e]})),n.a.createElement("span",null,c("resources.customers.name",1),":\xa0",n.a.createElement(Ct,{record:a[e],basePath:r})),n.a.createElement("span",null,c("resources.reviews.fields.product_id"),":\xa0",n.a.createElement(Re,{record:a[e],basePath:r})),"pending"===a[e].status&&n.a.createElement("span",null,c("resources.reviews.fields.comment"),":",n.a.createElement("br",null),a[e].comment),"pending"===a[e].status&&n.a.createElement("span",null,n.a.createElement(mr,{record:a[e]}))))}))});Tr.defaultProps={data:{},ids:[]};var Dr=Tr,Rr=cr.a,Nr=function(e){var t=Object(D.a)({},e);return n.a.createElement(Ga.a,t,n.a.createElement(Ja.a,{source:"q",alwaysOn:!0}),n.a.createElement(Qa.a,{source:"status",choices:[{id:"accepted",name:"Accepted"},{id:"pending",name:"Pending"},{id:"rejected",name:"Rejected"}]}),n.a.createElement($a.a,{source:"customer_id",reference:"customers"},n.a.createElement(Ka.a,{optionText:function(e){return"".concat(e.first_name," ").concat(e.last_name)}})),n.a.createElement($a.a,{source:"product_id",reference:"products"},n.a.createElement(Ka.a,{optionText:"reference"})),n.a.createElement(Xa.a,{source:"date_gte"}),n.a.createElement(Xa.a,{source:"date_lte"}))},Lr=function(e){return n.a.createElement(Ya.a,e,n.a.createElement(Or,{label:"resources.reviews.action.accept"}),n.a.createElement(wr,{label:"resources.reviews.action.reject"}),n.a.createElement(Za.a,null))},Ar=function(e){var t=Object(D.a)({},e);return n.a.createElement(ke.a,Object.assign({},t,{bulkActions:n.a.createElement(Lr,null),filters:n.a.createElement(Nr,null),perPage:25,sort:{field:"date",order:"DESC"}}),n.a.createElement(we.a,{xsmall:n.a.createElement(Dr,null),medium:n.a.createElement(er.a,{rowStyle:Fr},n.a.createElement(Ft.a,{source:"date"}),n.a.createElement(Ct,null),n.a.createElement(Re,null),n.a.createElement(Ue,null),n.a.createElement(It.a,{source:"comment"}),n.a.createElement(It.a,{source:"status"}),n.a.createElement(mr,null),n.a.createElement(Pt.a,null))}))},Br=function(e){var t=Object(D.a)({},e);return n.a.createElement(tr.a,Object.assign({},t,{actions:n.a.createElement(hr,null)}),n.a.createElement(ar.a,null,n.a.createElement(Ft.a,{source:"date"}),n.a.createElement(Ct,null),n.a.createElement(Re,null),n.a.createElement(xt.a,{source:"command_id",reference:"commands",addLabel:!0},n.a.createElement(It.a,{source:"reference"})),n.a.createElement(Ue,null),n.a.createElement(rr.a,{source:"comment"}),n.a.createElement(Qa.a,{source:"status",choices:[{id:"accepted",name:"Accepted"},{id:"pending",name:"Pending"},{id:"rejected",name:"Rejected"}]})))},Ur=[{name:"customers",icon:n.a.createElement(it,null)},{name:"segments",icon:n.a.createElement(Oe.a,null)},{name:"commands",icon:n.a.createElement(vt.a,null)},{name:"products",icon:n.a.createElement(Ca,null)},{name:"categories",icon:n.a.createElement(Wa,null)},{name:"reviews",icon:n.a.createElement(Rr,null)}],Mr=B()(_e.withRouter,Object(L.connect)(function(e){return{theme:e.theme,locale:e.i18n.locale}},{}),te.a)(function(e){var t=e.onMenuClick,a=e.translate,r=e.logout;return n.a.createElement("div",null,n.a.createElement(je.a,{onClick:t}),Ur.map(function(e){return n.a.createElement(de.a,{key:e.name,to:"/".concat(e.name),primaryText:a("resources.".concat(e.name,".name"),{smart_count:2}),leftIcon:e.icon,onClick:t})}),n.a.createElement(we.a,{xsmall:n.a.createElement(de.a,{to:"/configuration",primaryText:a("pos.configuration"),leftIcon:n.a.createElement(fe.a,null),onClick:t}),medium:null}),n.a.createElement(we.a,{xsmall:r,medium:null}))}),zr=a(174),Wr=a(82),qr=a(797),Vr=a.n(qr),Hr=a(798),Gr=a.n(Hr),Jr="https://marmelab.com/posters/beard-".concat(parseInt(10*Math.random(),10)+1,".jpeg"),Qr=Object(te.a)(function(e){var t=e.translate;return n.a.createElement(Wr.Card,null,n.a.createElement(Wr.CardImg,{src:Jr,style:{height:"18em",display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),n.a.createElement(Wr.CardBlock,null,n.a.createElement(Wr.H2,null,t("pos.dashboard.welcome.title")),n.a.createElement(Wr.P,null,t("pos.dashboard.welcome.subtitle"))),n.a.createElement(G.a,{style:{justifyContent:"flex-end"}},n.a.createElement(Wr.Button,{href:"https://marmelab.com/react-admin",className:"d-inline-flex align-items-center",color:"secondary"},n.a.createElement(Vr.a,{className:"pr-1"}),t("pos.dashboard.welcome.aor_button")),n.a.createElement(Wr.Button,{href:"https://github.com/marmelab/react-admin/tree/master/examples/demo",className:"d-inline-flex align-items-center",color:"secondary"},n.a.createElement(Gr.a,{className:"pr-1"}),t("pos.dashboard.welcome.demo_button"))))}),$r={card:{float:"left",margin:"-20px 20px 0 15px",zIndex:100,borderRadius:3},icon:{float:"right",width:54,height:54,padding:14,color:"#fff"}},Kr=function(e){var t=e.Icon,a=e.bgColor;return n.a.createElement(Wr.Card,{style:{backgroundColor:a,float:"left",margin:"-20px 20px 0 15px",zIndex:"100",borderRadius:3}},n.a.createElement(t,{style:$r.icon}))},Xr={main:{flex:"1",marginRight:"1em",marginTop:20},card:{overflow:"inherit",textAlign:"right",padding:16,minHeight:52,display:"block"}},Yr=Object(te.a)(function(e){var t=e.value,a=e.translate;return n.a.createElement("div",{style:Xr.main},n.a.createElement(Kr,{Icon:vt.a,bgColor:"#31708f"}),n.a.createElement(Wr.Card,{style:Xr.card},n.a.createElement(Wr.P,null,a("pos.dashboard.monthly_revenue")),n.a.createElement(Wr.H3,null,t)))}),Zr=a(799),en=a.n(Zr),tn={main:{flex:"1",marginRight:"1em",marginTop:20},card:{overflow:"inherit",textAlign:"right",padding:16,minHeight:52,display:"block"}},an=Object(te.a)(function(e){var t=e.value,a=e.translate;return n.a.createElement("div",{style:tn.main},n.a.createElement(Kr,{Icon:en.a,bgColor:"#FF9800"}),n.a.createElement(Wr.Card,{style:tn.card},n.a.createElement(Wr.P,null,a("pos.dashboard.monthly_revenue")),n.a.createElement(Wr.H3,null,t)))}),rn=a(199),nn=a.n(rn),cn=a(200),ln=a.n(cn),on=a(800),sn=a.n(on),un=a(251),mn=a.n(un),dn=B()(te.a)(function(e){var t=e.orders,a=void 0===t?[]:t,r=e.customers,c=void 0===r?{}:r,l=e.translate;return n.a.createElement(V.a,null,n.a.createElement(lt.a,{title:l("pos.dashboard.pending_orders")}),n.a.createElement(nn.a,{dense:!0},a.map(function(e){return n.a.createElement(ln.a,{key:e.id,button:!0,component:_e.Link,to:"/commands/".concat(e.id)},c[e.customer_id]?n.a.createElement(M.a,{src:"".concat(c[e.customer_id].avatar,"?size=32x32")}):n.a.createElement(M.a,null),n.a.createElement(mn.a,{primary:new Date(e.date).toLocaleString("en-GB"),secondary:l("pos.dashboard.order.items",{smart_count:e.basket.length,nb_items:e.basket.length,customer_name:c[e.customer_id]?"".concat(c[e.customer_id].first_name," ").concat(c[e.customer_id].last_name):""})}),n.a.createElement(sn.a,null,n.a.createElement("span",null,e.total,"$")))})))}),En={pathname:"reviews",query:{filter:JSON.stringify({status:"pending"})}},pn=B()(te.a)(function(e){var t=e.reviews,a=void 0===t?[]:t,r=e.customers,c=void 0===r?{}:r,l=e.nb,o=e.translate;return n.a.createElement("div",null,n.a.createElement(Kr,{Icon:cr.a,bgColor:"#f44336"}),n.a.createElement(V.a,null,n.a.createElement("p",null,o("pos.dashboard.pending_reviews")),n.a.createElement("h2",null,n.a.createElement(_e.Link,{to:En},l)),n.a.createElement(yt.a,null),n.a.createElement(nn.a,null,a.map(function(e){return n.a.createElement(ln.a,{key:e.id,button:!0,component:_e.Link,to:"/reviews/".concat(e.id)},c[e.customer_id]?n.a.createElement(M.a,{src:"".concat(c[e.customer_id].avatar,"?size=32x32")}):n.a.createElement(M.a,null),n.a.createElement(mn.a,{primary:n.a.createElement(Ue,{record:e}),secondary:e.comment,style:{paddingRight:0}}))}))))}),fn=a(801),bn=a.n(fn),hn=B()(te.a)(function(e){var t=e.visitors,a=void 0===t?[]:t,r=e.nb,c=e.translate;return n.a.createElement("div",null,n.a.createElement(Kr,{Icon:bn.a,bgColor:"#4caf50"}),n.a.createElement(V.a,null,n.a.createElement("p",null,c("pos.dashboard.new_customers")),n.a.createElement("h2",null,r),n.a.createElement(yt.a,null),n.a.createElement(nn.a,null,a.map(function(e){return n.a.createElement(ln.a,{button:!0,to:"/customers/".concat(e.id),component:_e.Link,key:e.id},n.a.createElement(M.a,{src:"".concat(e.avatar,"?size=32x32")}),n.a.createElement(mn.a,{primary:"".concat(e.first_name," ").concat(e.last_name)}))}))))}),vn=function(e){switch(e){case"rest":return a.e(7).then(a.bind(null,2097)).then(function(e){return e.default});case"graphql":return Promise.all([a.e(4),a.e(6)]).then(a.bind(null,2094)).then(function(e){return e.default()});default:throw new Error("Unknow dataProvider type ".concat(e))}},gn={flex:{display:"flex"},flexColumn:{display:"flex",flexDirection:"column"},leftCol:{flex:1,marginRight:"1em"},rightCol:{flex:1,marginLeft:"1em"},singleCol:{marginTop:"2em",marginBottom:"2em"}},yn=function(e){function t(){var e,a;Object(d.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(n)))).state={},a}return Object(b.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=new Date;t.setDate(t.getDate()-30),vn("rest").then(function(a){a(w.d,"commands",{filter:{date_gte:t.toISOString()},sort:{field:"date",order:"DESC"},pagination:{page:1,perPage:50}}).then(function(e){return e.data.filter(function(e){return"cancelled"!==e.status}).reduce(function(e,t){return"cancelled"!==t.status&&(e.revenue+=t.total,e.nbNewOrders++),"ordered"===t.status&&e.pendingOrders.push(t),e},{revenue:0,nbNewOrders:0,pendingOrders:[]})}).then(function(t){var a=t.revenue,r=t.nbNewOrders,n=t.pendingOrders;return e.setState({revenue:a.toLocaleString(void 0,{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}),nbNewOrders:r,pendingOrders:n}),n}).then(function(e){return e.map(function(e){return e.customer_id})}).then(function(e){return a(w.e,"customers",{ids:e})}).then(function(e){return e.data}).then(function(e){return e.reduce(function(e,t){return e[t.id]=t,e},{})}).then(function(t){return e.setState({pendingOrdersCustomers:t})}),a(w.d,"reviews",{filter:{status:"pending"},sort:{field:"date",order:"DESC"},pagination:{page:1,perPage:100}}).then(function(e){return e.data}).then(function(t){var a=t.reduce(function(e){return++e},0),r=t.slice(0,Math.min(10,t.length));return e.setState({pendingReviews:r,nbPendingReviews:a}),r}).then(function(e){return e.map(function(e){return e.customer_id})}).then(function(e){return a(w.e,"customers",{ids:e})}).then(function(e){return e.data}).then(function(e){return e.reduce(function(e,t){return e[t.id]=t,e},{})}).then(function(t){return e.setState({pendingReviewsCustomers:t})}),a(w.d,"customers",{filter:{has_ordered:!0,first_seen_gte:t.toISOString()},sort:{field:"first_seen",order:"DESC"},pagination:{page:1,perPage:100}}).then(function(e){return e.data}).then(function(t){e.setState({newCustomers:t}),e.setState({nbNewCustomers:t.reduce(function(e){return++e},0)})})})}},{key:"render",value:function(){var e=this.state,t=e.nbNewCustomers,a=e.nbNewOrders,c=e.nbPendingReviews,l=e.newCustomers,o=e.pendingOrders,s=e.pendingOrdersCustomers,i=e.pendingReviews,u=e.pendingReviewsCustomers,m=e.revenue;return n.a.createElement(r.Fragment,null,n.a.createElement(zr.a,{title:"Posters Galore Admin"}),n.a.createElement(we.a,{xsmall:n.a.createElement("div",null,n.a.createElement("div",{style:gn.flexColumn},n.a.createElement("div",{style:{marginBottom:"2em"}},n.a.createElement(Qr,null)),n.a.createElement("div",{style:gn.flex},n.a.createElement(Yr,{value:m}),n.a.createElement(an,{value:a})),n.a.createElement("div",{style:gn.singleCol},n.a.createElement(dn,{orders:o,customers:s})))),small:n.a.createElement("div",{style:gn.flexColumn},n.a.createElement("div",{style:gn.singleCol},n.a.createElement(Qr,null)),n.a.createElement("div",{style:gn.flex},n.a.createElement(Yr,{value:m}),n.a.createElement(an,{value:a})),n.a.createElement("div",{style:gn.singleCol},n.a.createElement(dn,{orders:o,customers:s}))),medium:n.a.createElement("div",{style:gn.flex},n.a.createElement("div",{style:gn.leftCol},n.a.createElement("div",{style:gn.flex},n.a.createElement(Yr,{value:m}),n.a.createElement(an,{value:a})),n.a.createElement("div",{style:gn.singleCol},n.a.createElement(Qr,null)),n.a.createElement("div",{style:gn.singleCol},n.a.createElement(dn,{orders:o,customers:s}))),n.a.createElement("div",{style:gn.rightCol},n.a.createElement("div",{style:gn.flex},n.a.createElement(pn,{nb:c,reviews:i,customers:u}),n.a.createElement(hn,{nb:t,visitors:l}))))}))}}]),t}(r.Component),On=a(127),jn=B()(Object(L.connect)(function(e){return{theme:e.theme,locale:e.i18n.locale}},{changeLocale:On.d,changeTheme:function(e){return{type:"CHANGE_THEME",payload:e}}}),te.a)(function(e){var t=e.theme,a=e.locale,r=e.changeTheme,c=e.changeLocale,l=e.translate;return n.a.createElement(V.a,null,n.a.createElement(zr.a,{title:l("pos.configuration")}),n.a.createElement(nt.a,null,n.a.createElement("div",null,l("pos.theme.name")),n.a.createElement(W.a,{variant:"raised",color:"light"===t?"primary":"default",onClick:function(){return r("light")}},l("pos.theme.light")),n.a.createElement(W.a,{variant:"raised",color:"dark"===t?"primary":"default",onClick:function(){return r("dark")}},l("pos.theme.dark"))),n.a.createElement(nt.a,null,n.a.createElement("div",null,l("pos.language")),n.a.createElement(W.a,{variant:"raised",color:"en"===a?"primary":"default",onClick:function(){return c("en")}},"en"),n.a.createElement(W.a,{variant:"raised",color:"fr"===a?"primary":"default",onClick:function(){return c("fr")}},"fr")))}),wn=a(147),_n=a.n(wn),xn=B()(te.a)(function(e){var t=e.segment,a=e.translate;return n.a.createElement(_n.a,{size:"sm",color:"primary",className:" d-inline-flex align-items-center",tag:_e.Link,to:{pathname:"/customers",search:Object(Ma.stringify)({page:1,perPage:25,filter:JSON.stringify({groups:t})})}},n.a.createElement(it,{className:"pr-1"}),a("resources.segments.fields.customers"))}),kn=Object(te.a)(function(e){var t=e.translate;return n.a.createElement(Mt.a,null,n.a.createElement(xe.Title,{title:t("resources.segments.name")}),n.a.createElement(Wt.a,{className:"mb-0"},n.a.createElement(Kt.a,null,n.a.createElement(Yt.a,null,n.a.createElement(Qt.a,{style:{border:"none"}},t("resources.segments.fields.name")),n.a.createElement(Qt.a,{style:{border:"none"}}))),n.a.createElement(Vt.a,null,Je.map(function(e){return n.a.createElement(Yt.a,{key:e.id},n.a.createElement(Gt.a,null,t(e.name)),n.a.createElement(Gt.a,null,n.a.createElement(xn,{segment:e.id})))}))))}),Cn=[n.a.createElement(_e.Route,{exact:!0,path:"/configuration",component:jn}),n.a.createElement(_e.Route,{exact:!0,path:"/segments",component:kn})],In=a(203),Pn=a.n(In),Fn=Object(j.a)({},Pn.a,{pos:{search:"Search",configuration:"Configuration",language:"Language",theme:{name:"Theme",light:"Light",dark:"Dark"},dashboard:{monthly_revenue:"Monthly Revenue",new_orders:"New Orders",pending_reviews:"Pending Reviews",new_customers:"New Customers",pending_orders:"Pending Orders",order:{items:"by %{customer_name}, one item |||| by %{customer_name}, %{nb_items} items"},welcome:{title:"Welcome to react-admin demo",subtitle:"This is the admin of an imaginary poster shop. Fell free to explore and modify the data - it's local to your computer, and will reset each time you reload.",aor_button:"react-admin site",demo_button:"Source for this demo"}}},resources:{customers:{name:"Customer |||| Customers",fields:{commands:"Orders",groups:"Segments",last_seen_gte:"Visited Since",name:"Name",total_spent:"Total spent"},tabs:{identity:"Identity",address:"Address",orders:"Orders",reviews:"Reviews",stats:"Stats"},page:{delete:"Delete Customer"}},commands:{name:"Order |||| Orders",fields:{basket:{delivery:"Delivery",reference:"Reference",quantity:"Quantity",sum:"Sum",tax_rate:"Tax Rate",total:"Total",unit_price:"Unit Price"},customer_id:"Customer",date_gte:"Passed Since",date_lte:"Passed Before",total_gte:"Min amount",status:"Status",returned:"Returned"}},products:{name:"Poster |||| Posters",fields:{category_id:"Category",height_gte:"Min height",height_lte:"Max height",height:"Height",image:"Image",price:"Price",reference:"Reference",stock_lte:"Low Stock",stock:"Stock",thumbnail:"Thumbnail",width_gte:"Min width",width_lte:"Max width",width:"Width"},tabs:{image:"Image",details:"Details",description:"Description",reviews:"Reviews"}},categories:{name:"Category |||| Categories",fields:{products:"Products"}},reviews:{name:"Review |||| Reviews",fields:{customer_id:"Customer",command_id:"Order",product_id:"Product",date_gte:"Posted since",date_lte:"Posted before",date:"Date",comment:"Comment",rating:"Rating"},action:{accept:"Accept",reject:"Reject"},notification:{approved_success:"Review approved",approved_error:"Error: Review not approved",rejected_success:"Review rejected",rejected_error:"Error: Review not rejected"}},segments:{name:"Segments",fields:{customers:"Customers",name:"Name"},data:{compulsive:"Compulsive",collector:"Collector",ordered_once:"Ordered once",regular:"Regular",returns:"Returns",reviewer:"Reviewer"}}}}),Sn=function(e){switch(e){case"rest":return Promise.all([a.e(0),a.e(10),a.e(9)]).then(a.bind(null,2095)).then(function(e){return e.default()});case"graphql":return Promise.all([a.e(0),a.e(11),a.e(8)]).then(a.bind(null,2096)).then(function(e){return e.default()});default:throw new Error("Unknow dataProvider type ".concat(e))}},Tn=function(e){return"fr"===e?a.e(5).then(a.bind(null,2093)).then(function(e){return e.default}):Fn},Dn=function(e){function t(){var e,a;Object(d.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(n)))).state={dataProvider:null},a}return Object(b.a)(t,e),Object(E.a)(t,[{key:"componentWillMount",value:function(){var e=Object(m.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sn("rest");case 2:return this.restoreFetch=e.sent,e.next=5,vn("rest");case 5:t=e.sent,this.setState({dataProvider:t});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.restoreFetch()}},{key:"render",value:function(){var e=this.state.dataProvider;return e?n.a.createElement(h.a,{title:"Posters Galore Admin",dataProvider:e,customReducers:{theme:S},customSagas:F,customRoutes:Cn,authProvider:y,dashboard:yn,loginPage:se,appLayout:ge,menu:Mr,locale:"en",i18nProvider:Tn},n.a.createElement(v.a,{name:"customers",list:dt,edit:pt,create:ft,icon:it}),n.a.createElement(v.a,{name:"commands",list:At,edit:ca,icon:vt.a,options:{label:"Orders"}}),n.a.createElement(v.a,{name:"products",list:Fa,create:Sa,edit:Da,icon:Ca}),n.a.createElement(v.a,{name:"categories",list:qa,edit:Ha,icon:Wa}),n.a.createElement(v.a,{name:"reviews",list:Ar,edit:Br,icon:Rr})):n.a.createElement("div",{className:"loader-container"},n.a.createElement("div",{className:"loader"},"Loading..."))}}]),t}(r.Component);a(1478);l.a.render(n.a.createElement(s.a,{injectGlobal:!0,reset:!0},n.a.createElement(Dn,null)),document.getElementById("root"))},807:function(e,t,a){e.exports=a(1479)},887:function(e,t,a){}},[[807,2,3]]]);
//# sourceMappingURL=main.ef9618c3.chunk.js.map